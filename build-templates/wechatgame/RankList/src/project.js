require=function a(c,i,l){function s(t,e){if(!i[t]){if(!c[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var r=i[t]={exports:{}};c[t][0].call(r.exports,function(e){return s(c[t][1][e]||e)},r,r.exports,a,c,i,l)}return i[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)s(l[e]);return s}({RankingControl:[function(e,t,o){"use strict";cc._RF.push(t,"843c8i1sPpBzo9KaNxgLf3P","RankingControl"),Object.defineProperty(o,"__esModule",{value:!0});var c=e("./itemControl"),n=cc._decorator,r=n.ccclass,a=n.property,i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selfItem=null,e.contentNode=null,e.itemprefeb=null,e.avatarUrl="",e}return __extends(e,t),e.prototype.hide=function(){this.contentNode.destroyAllChildren()},e.prototype.show=function(o){var a=this;wx.getUserInfo({openIdList:["selfOpenId"],lang:"zh_CN",success:function(e){if(console.log(e),console.log("getUserInfo success"),"getUserInfo:ok"==e.errMsg){var t=e.data[0].avatarUrl;a.selfItem.initAvatar(t),a.selfItem.initName(e.data[0].nickName),a.avatarUrl=t}wx.getUserCloudStorage({keyList:[o],success:function(e){console.log("getUserCloudStorage","success",e),"getUserCloudStorage:ok"==e.errMsg&&a.selfItem.initscore(e.KVDataList[0].value)},fail:function(e){console.log("getUserCloudStorage","fail")},complete:function(e){console.log("getUserCloudStorage","ok")}}),wx.getFriendCloudStorage({keyList:[o],success:function(e){console.log("getFriendCloudStorage","success",e);var t=e.data;t.sort(function(e,t){return 0==e.KVDataList.length&&0==t.KVDataList.length?0:0==e.KVDataList.length?1:0==t.KVDataList.length?-1:t.KVDataList[0].value-e.KVDataList[0].value});for(var o=0;o<t.length;o++){var n=cc.instantiate(a.itemprefeb),r=n.getComponent(c.default);r.initnum(o+1),r.initscore(t[o].KVDataList[0].value),r.initName(t[o].nickname),r.initAvatar(t[o].avatarUrl),n.x=0,n.y=-150*o-100,n.parent=a.contentNode,a.avatarUrl==t[o].avatarUrl&&a.selfItem.initnum(o+1)}a.contentNode.height=150*e.data.length+100,a.contentNode.x=0,a.contentNode.y=450},fail:function(e){console.log("getFriendCloudStorage","fail",e)},complete:function(e){console.log("getFriendCloudStorage","complete",e)}})},fail:function(e){console.log(e),console.log("getUserInfo fail")},complete:function(e){console.log(e),console.log("getUserInfo complete")}})},__decorate([a(c.default)],e.prototype,"selfItem",void 0),__decorate([a(cc.Node)],e.prototype,"contentNode",void 0),__decorate([a(cc.Prefab)],e.prototype,"itemprefeb",void 0),e=__decorate([r],e)}(cc.Component);o.default=i,cc._RF.pop()},{"./itemControl":"itemControl"}],itemControl:[function(e,t,o){"use strict";cc._RF.push(t,"20d55ewgc5KIqUfkNNNELGE","itemControl"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Number=null,e.SocreLabel=null,e.NameLabel=null,e.avatarImgSprite=null,e}return __extends(e,t),e.prototype.initAvatar=function(e){this.createImage(e)},e.prototype.initName=function(e){this.NameLabel.string=e},e.prototype.initscore=function(e){this.SocreLabel.string=e},e.prototype.initnum=function(e){this.Number.string=e.toString()},e.prototype.init=function(e,t,o,a){var c=this;this.Number.string=e.toString(),this.SocreLabel.string=t.toString(),this.NameLabel.string=o,cc.loader.load({url:a,type:"png"},function(e,t){if(t instanceof cc.Texture2D){var o=new cc.SpriteFrame(t),n=c.avatarImgSprite.node.width,r=c.avatarImgSprite.node.height;c.avatarImgSprite.spriteFrame=o,c.avatarImgSprite.node.width=n,c.avatarImgSprite.node.height=r}else console.log(a),console.log("加载头像失败")})},e.prototype.createImage=function(e){var t=this;try{var o=wx.createImage();o.onload=function(){try{var e=new cc.Texture2D;e.initWithElement(o),e.handleLoadedTexture(),t.avatarImgSprite.spriteFrame=new cc.SpriteFrame(e)}catch(e){cc.log(e),t.avatarImgSprite.node.active=!1}},o.src=e}catch(e){cc.log(e),this.avatarImgSprite.node.active=!1}},__decorate([a(cc.Label)],e.prototype,"Number",void 0),__decorate([a(cc.Label)],e.prototype,"SocreLabel",void 0),__decorate([a(cc.Label)],e.prototype,"NameLabel",void 0),__decorate([a(cc.Sprite)],e.prototype,"avatarImgSprite",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],launch:[function(e,t,o){"use strict";cc._RF.push(t,"a1925U/dKtKgInYZPHoiwaN","launch"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./RankingControl"),r=cc._decorator,a=r.ccclass,c=r.property,i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.display=null,e}return __extends(e,t),e.prototype.start=function(){var t=this;wx.onMessage(function(e){switch(e.message){case"Show":t._show(e.MAIN_MENU_NUM);break;case"Hide":t._hide(e.MAIN_MENU_NUM);break;case"Submit":t.submitScore(e.MAIN_MENU_NUM,e.score)}})},e.prototype.submitScore=function(t,o){wx.getUserCloudStorage({keyList:[t],success:function(e){console.log("getUserCloudStorage","success",e),0!=e.KVDataList.length&&e.KVDataList[0].value>o||wx.setUserCloudStorage({KVDataList:[{key:t,value:""+o}],success:function(e){console.log("setUserCloudStorage","success",e)},fail:function(e){console.log("setUserCloudStorage","fail")},complete:function(e){console.log("setUserCloudStorage","ok")}})},fail:function(e){console.log("getUserCloudStorage","fail")},complete:function(e){console.log("getUserCloudStorage","ok")}})},e.prototype._show=function(e){console.log("_show");var t=cc.moveTo(.5,0,73);this.display.runAction(t),this.display.getComponent(n.default).show(e)},e.prototype._hide=function(e){console.log("_hide");var t=cc.moveTo(.5,0,1850);this.display.runAction(t),this.display.getComponent(n.default).hide()},__decorate([c(cc.Node)],e.prototype,"display",void 0),e=__decorate([a],e)}(cc.Component);o.default=i,cc._RF.pop()},{"./RankingControl":"RankingControl"}]},{},["RankingControl","itemControl","launch"]);